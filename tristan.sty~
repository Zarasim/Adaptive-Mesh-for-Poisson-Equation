\ProvidesPackage{tristan}
\usepackage{amsmath,amssymb}
%\usepackage{yhmath}
\usepackage{graphics}
\usepackage{enumerate}
\usepackage{xspace}
%\usepackage{xcolor}
\usepackage{boxedminipage}
\usepackage{accents}
%\usepackage{algorithmicx}
%\usepackage{algorithmic}
\usepackage{ifthen}
\usepackage{amsmath,amssymb}    %mathematics
%\usepackage{ntheorem} %theorems
\usepackage{stmaryrd} %more symbols
\usepackage{eufrak}     %fraktur charcters
\usepackage{mathrsfs} %nice calligraphic characters
\usepackage{bbold}    %blackboard bold
%% \usepackage{eurosans} %euro... this may not be needed
\provideboolean{usemathrsfs}
\setboolean{usemathrsfs}{true}
% General purpose packages
\usepackage{enumerate}% a facility to customize numbered lists
%\usepackage{enumitem}% even more customization
\usepackage{xspace}% smart spacing after macros: detects punctuation
%\usepackage{fancyheadings} % to generate nice top and bottom running headers
%\usepackage[greek,english]{babel}
\usepackage{boxedminipage}% mainly used for slides
%\usepackage[latin1]{inputenc}% for accents, umlauts, etc. directly in the text
%\usepackage[latin1]{inputenc}% for accents, umlauts, etc. directly in the text
%\usepackage{verbatim}% provides also the {comment} environment
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% \usepackage{eurosym}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\provideboolean{usebeamer}% when using beamertex, 
% sometimes commands are different
%\provideboolean{isthesis}% used in the PhD thesis
%\provideboolean{isamsltex}% use when using AMS papers style
%\provideboolean{issiamltex}% on when using SIAM papers... becoming obsolete

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\provideboolean{issiamlatex}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Hyperlinking: this clashes with other packs for now...
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 \usepackage{hyperref}
 \newcommand{\linkedurl}[1]{{\href{#1}{#1}}}
 \newcommand{\linkedemail}[1]{{\makeatletter\color{blue}\href{mailto:#1}{#1}\makeatother}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Extended comments (In order to avoid too many % signs)
\newcommand{\Ignore}[1]{}
%\providecommand{\freeze}[1]{}%
\newcommand{\freeze}[1]{}% Obsolete, kept for compatibility
%\newcommand{\dummy}{}
\newcommand{\crossout}[1]{{\textcolor{red!20}{#1}}}
\newcommand{\highlight}[1]{{\textcolor{red}{#1}}}
%\renewcommand{\highlight}[1]{{\colorbox{green}{\begin{minipage}{#1}\end{minipage}}}}
\newcommand{\standout}[1]{{\textcolor{magenta}{#1}}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\provideboolean{shownotes}
\setboolean{shownotes}{false}%true
\newcounter{margnote}[page]
\newcommand{\margnotemark}{\standout{\upshape\texttt{>\arabic{margnote}<}}}
\newcommand{\margnote}[2][]{\ifthenelse{\boolean{shownotes}}%
  {\stepcounter{margnote}%
    \margnotemark%
    \marginpar{\texttt{\raggedright\tiny\margnotemark{#1}: #2}}}
  {}}
\provideboolean{showtodo}
%\newcommand{\todo}[1]{\ifthenelse{\boolean{showtodo}}{\noindent\fbox{\texttt {#1}}\\}{}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\inserttext}[1]{%
  \stepcounter{margnote}%
  \standout{$\mathtt{\arabic{margnote}}\atop\rightthreetimes$}
  \marginpar{%
    \stanout{$\mathtt{\arabic{margnote}}\atop\rightthreetimes$}\highlight{#1}}%
}
\newcommand{\insertmath}[1]{\highlight{#1}}
\newcommand{\typofixtext}[2]{\crossout{#1}\marginpar{\standout{#1}}}
\newcommand{\typofixmath}[2]{
  \crossout{#1}\atop{\highlight{#2}}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\todo}[1]{
  \ifthenelse{\boolean{showtodo}}{\margnote[To do.]{#1}}{}}
\newenvironment{Todo}{
  \ifthenelse{\boolean{showtodo}}{\setlength{\parindent}{0pt}\par\begin{boxedminipage}{\textwidth}\tt}{\Ignore}} {
  \ifthenelse{\boolean{showtodo}}{\end{boxedminipage}}{}}
\newenvironment{Toreview}{\color{magenta}\par}{\color{black}}

\newcommand{\checkit}{[$\ast$]\marginpar{$[\ast]$: {\tiny Check!}}\xspace}
\newcommand{\omitfirst}{[$\ast$]\marginpar{$[\ast]$: {\tiny May be omitted on 1st reading.}}\xspace}
\provideboolean{showcomments}
\newcommand{\margincomment}[1]{
  \ifthenelse{\boolean{showcomments}}{\marginpar{\tiny #1}}{}
}
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\provideboolean{showchanges}
\setboolean{showchanges}{true}
% A command to point-out changes explicitly
%\ifthenelse{\boolean{usebeamer}}{}{
%\usepackage[dvips]{color}
%\newcommand{\chcolor}{\color{blue}}
%\newcommand{\changes}[1]{
%  \ifthenelse{\boolean{showchanges}}
%	     {{\chcolor #1}}
%	     {#1
%}
%}%end\newcommand
\newcommand{\changes}[1]{
  \ifthenelse{\boolean{showchanges}} {{\highlight{#1}}} {#1}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\changesbox}[1]{\par\colorbox{cyan}{\begin{minipage}{\linewidth}#1\end{minipage}}}%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\changefromto}[3][replace]{
  \ifthenelse{\boolean{showchanges}} {{\crossout{#2}\margnote{#1}}{\highlight{#3}}} {#3\xspace}
}

\newcommand{\mathchangefromto}[2]{\crossout{#1}{\color{magenta}\mapsto}\highlight{#2}}
\newcommand{\changedisplayfromto}[2]{
  \changefromto{#1\addtocounter{equation}{-1}}{#2}
}
\newcommand{\ChangeText}[2]{\changefromto[sub]{#1}{#2}}
\newcommand{\InsertText}[1]{\changefromto[ins]{}{#1}}
\newcommand{\DeleteText}[1]{\changefromto[del]{#1}{}}
\newcommand{\InsertMath}[1]{\mathchangefromto{{}^{\texttt{\tiny{ins}}}}{#1}}
\newcommand{\DeleteMath}[1]{\mathchangefromto{#1}{{}^{\texttt{\tiny{del}}}}}
%%\newcommand{\Insert}[1]{\changefromto{\texttt{insert}}{#1}}
%%\newcommand{\Remove}[1]{\changefromto{\crossout{#1}}{\texttt{delete}}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Text abbreviations (change with language)
% almost everywhere/each
\newcommand{\Ae}{\ensuremath{\text{ a.e.}}\xspace}
% almost surely
\newcommand{\as}{\ensuremath{\text{ a.s.}}\xspace}
% independent and identically distributed
\newcommand{\iid}{\ensuremath{\text{i.i.d.}}\xspace}
% quasi ovunque
\newcommand{\qo}{\ensuremath{\text{ a.e.}}\xspace}
%
\newcommand{\ie}{\ensuremath{\text{ i.e., }}\xspace}
\newcommand{\eg}{\ensuremath{\text{ e.g., }}\xspace}
%
%\newcommand{\aposteriori}{\emph{a posteriori}\xspace}
%\newcommand{\Aposteriori}{\emph{A posteriori}\xspace}

%Typesetting shortcuts
\newcommand{\NN}{\notag\\}
\newcommand{\MM}{\\[1.5\jot]}
\newcommand{\NM}{\notag\\[1.5\jot]}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{mathrsfs}%extra mathematical symbols
\provideboolean{usemathrsfs}
\setboolean{usemathrsfs}{true}% switch if mathrsfs is unused
% in that case the mathscript will be the usual (and ugly) computer 
% modern script:
\newcommand{\mathscript}{\mathscr}
	   
\newcommand{\cA}{\ensuremath{\mathscript A}\xspace}
\newcommand{\cB}{\ensuremath{\mathscript B}\xspace}
\newcommand{\cC}{\ensuremath{\mathscript C}\xspace}
\newcommand{\cD}{\ensuremath{\mathscript D}\xspace}
\newcommand{\cE}{\ensuremath{\mathscript E}\xspace}
\newcommand{\cF}{\ensuremath{\mathscript F}\xspace}
\newcommand{\cG}{\ensuremath{\mathscript G}\xspace}
\newcommand{\cH}{\ensuremath{\mathscript H}\xspace}
\newcommand{\cI}{\ensuremath{\mathscript I}\xspace}
\newcommand{\cJ}{\ensuremath{\mathscript J}\xspace}
\newcommand{\cK}{\ensuremath{\mathscript K}\xspace}
\newcommand{\cL}{\ensuremath{\mathscript L}\xspace}
\newcommand{\cM}{\ensuremath{\mathscript M}\xspace}
\newcommand{\cN}{\ensuremath{\mathscript N}\xspace}
\newcommand{\cO}{\ensuremath{\mathscript O}\xspace}
\newcommand{\cP}{\ensuremath{\mathscript P}\xspace}
\newcommand{\cQ}{\ensuremath{\mathscript Q}\xspace}
\newcommand{\cR}{\ensuremath{\mathscript R}\xspace}
\newcommand{\cS}{\ensuremath{\mathscript S}\xspace}
\newcommand{\cT}{\ensuremath{\mathscript T}\xspace}
\newcommand{\cU}{\ensuremath{\mathscript U}\xspace}
\newcommand{\cV}{\ensuremath{\mathscript V}\xspace}
\newcommand{\cW}{\ensuremath{\mathscript W}\xspace}
\newcommand{\cX}{\ensuremath{\mathscript X}\xspace}
\newcommand{\cY}{\ensuremath{\mathscript Y}\xspace}
\newcommand{\cZ}{\ensuremath{\mathscript Z}\xspace}

\newcommand{\hA}{\ensuremath{\mathcal A}\xspace}
\newcommand{\hB}{\ensuremath{\mathcal B}\xspace}
\newcommand{\hC}{\ensuremath{\mathcal C}\xspace}
\newcommand{\hD}{\ensuremath{\mathcal D}\xspace}
\newcommand{\hE}{\ensuremath{\mathcal E}\xspace}
\newcommand{\hF}{\ensuremath{\mathcal F}\xspace}
\newcommand{\hG}{\ensuremath{\mathcal G}\xspace}
\newcommand{\hH}{\ensuremath{\mathcal H}\xspace}
\newcommand{\hI}{\ensuremath{\mathcal I}\xspace}
\newcommand{\hJ}{\ensuremath{\mathcal J}\xspace}
\newcommand{\hK}{\ensuremath{\mathcal K}\xspace}
\newcommand{\hL}{\ensuremath{\mathcal L}\xspace}
\newcommand{\hM}{\ensuremath{\mathcal M}\xspace}
\newcommand{\hN}{\ensuremath{\mathcal N}\xspace}
\newcommand{\hO}{\ensuremath{\mathcal O}\xspace}
\newcommand{\hP}{\ensuremath{\mathcal P}\xspace}
\newcommand{\hQ}{\ensuremath{\mathcal Q}\xspace}
\newcommand{\hR}{\ensuremath{\mathcal R}\xspace}
\newcommand{\hS}{\ensuremath{\mathcal S}\xspace}
\newcommand{\hT}{\ensuremath{\mathcal T}\xspace}
\newcommand{\hU}{\ensuremath{\mathcal U}\xspace}
\newcommand{\hV}{\ensuremath{\mathcal V}\xspace}
\newcommand{\hW}{\ensuremath{\mathcal W}\xspace}
\newcommand{\hX}{\ensuremath{\mathcal X}\xspace}
\newcommand{\hY}{\ensuremath{\mathcal Y}\xspace}
\newcommand{\hZ}{\ensuremath{\mathcal Z}\xspace}

\newcommand{\rA}{\ensuremath{\mathbb A}\xspace}
\newcommand{\rB}{\ensuremath{\mathbb B}\xspace}
\newcommand{\rC}{\ensuremath{\mathbb C}\xspace}
\newcommand{\rD}{\ensuremath{\mathbb D}\xspace}
\newcommand{\rE}{\ensuremath{\mathbb E}\xspace}
\newcommand{\rF}{\ensuremath{\mathbb F}\xspace}
\newcommand{\rG}{\ensuremath{\mathbb G}\xspace}
\newcommand{\rH}{\ensuremath{\mathbb H}\xspace}
\newcommand{\rI}{\ensuremath{\mathbb I}\xspace}
\newcommand{\rJ}{\ensuremath{\mathbb J}\xspace}
\newcommand{\rK}{\ensuremath{\mathbb K}\xspace}
\newcommand{\rL}{\ensuremath{\mathbb L}\xspace}
\newcommand{\rM}{\ensuremath{\mathbb M}\xspace}
\newcommand{\rN}{\ensuremath{\mathbb N}\xspace}
\newcommand{\rO}{\ensuremath{\mathbb O}\xspace}
\newcommand{\rP}{\ensuremath{\mathbb P}\xspace}
\newcommand{\rQ}{\ensuremath{\mathbb Q}\xspace}
\newcommand{\rR}{\ensuremath{\mathbb R}\xspace}
\newcommand{\rS}{\ensuremath{\mathbb S}\xspace}
\newcommand{\rT}{\ensuremath{\mathbb T}\xspace}
\newcommand{\rU}{\ensuremath{\mathbb U}\xspace}
\newcommand{\rV}{\ensuremath{\mathbb V}\xspace}
\newcommand{\rW}{\ensuremath{\mathbb W}\xspace}
\newcommand{\rX}{\ensuremath{\mathbb X}\xspace}
\newcommand{\rY}{\ensuremath{\mathbb Y}\xspace}
\newcommand{\rZ}{\ensuremath{\mathbb Z}\xspace}

\newcommand{\naturals}{\rN\xspace}
\newcommand{\Nat}{\ensuremath{\rZ^+}}
\newcommand{\NO}{\ensuremath{\rN_0}}
\newcommand{\integers}{\rZ}
\newcommand{\Z}[1]{\integers^{#1}}
\newcommand{\rationals}{\rQ}
\newcommand{\reals}{\rR}
\newcommand{\R}[1]{\reals^{#1}}
\newcommand{\RO}{\reals^+_0}
\newcommand{\complex}{\rC}
%\newcommand{\C}[1]{\complex^{#1}}
\newcommand{\field}{\rF}
\newcommand{\F}[1]{\field^{#1}}

\newcommand{\one}{\ensuremath{\mathbb 1}\xspace}
\newcommand{\charfun}[1]{\one_{#1}}

\newcommand{\Tolto}{\smallsetminus}
\newcommand{\take}{\Tolto}
\newcommand{\takeset}[1]{\take\setof{#1}}
\newcommand{\closure}[1]{\overline{#1}}
\newcommand{\inner}{\cdot}
\newcommand{\scaprod}[2]{{#1}\inner{#2}}

% Greeks
% Upper
\newcommand{\Ga}{\ensuremath{\varGamma}\xspace}
\newcommand{\De}{\ensuremath{\varDelta}\xspace}
\newcommand{\Th}{\ensuremath{\varTheta}\xspace}
\newcommand{\La}{\ensuremath{\varLambda}\xspace}
\newcommand{\Ks}{\ensuremath{\varXi}\xspace}
\newcommand{\Pg}{\ensuremath{\varPi}\xspace}
\newcommand{\Si}{\ensuremath{\varSigma}\xspace}
\newcommand{\Y}{\ensuremath{\varUpsilon}\xspace}
\newcommand{\Fi}{\ensuremath{\varPhi}\xspace}
\newcommand{\Ps}{\ensuremath{\varPsi}\xspace}
\newcommand{\W}{\ensuremath{\Omega}\xspace}
\newcommand{\QW}{\ensuremath{\bar{\W}}\xspace}
% the following are ``inexistent'' upper case greek symbols
\providecommand{\Alpha}{\ensuremath{\mathrm A}}
\providecommand{\Beta}{\ensuremath{\mathrm B}}
\providecommand{\Epsilon}{\ensuremath{\mathrm E}}
\providecommand{\Zeta}{\ensuremath{\mathrm Z}}
\providecommand{\Eta}{\ensuremath{\mathrm H}}
\providecommand{\Iota}{\ensuremath{\mathrm I}}
\providecommand{\Kappa}{\ensuremath{\mathrm K}}
\providecommand{\Mu}{\ensuremath{\mathrm M}}
\providecommand{\Nu}{\ensuremath{\mathrm N}}
\providecommand{\Omicron}{\ensuremath{\mathrm O}}
\providecommand{\Rho}{\ensuremath{\mathrm P}}
\providecommand{\Varsigma}{\ensuremath{\mathrm C}}
\providecommand{\Tau}{\ensuremath{\mathrm T}}
\providecommand{\Chi}{\ensuremath{\mathrm X}}
% lower
\renewcommand{\a}{\ensuremath{\alpha}\xspace}% renewed command!
\renewcommand{\b}{\ensuremath{\beta}\xspace}% renewed command!
\newcommand{\g}{\ensuremath{\gamma}\xspace}
\newcommand{\de}{\ensuremath{\delta}\xspace}
\newcommand{\ep}{\ensuremath{\varepsilon}\xspace}
\newcommand{\epsi}{\ensuremath{\epsilon}\xspace}
\renewcommand{\th}{\ensuremath{\theta}\xspace}% renewed command!
\newcommand{\thet}{\ensuremath{\vartheta}\xspace}
\renewcommand{\k}{\ensuremath{\kappa}\xspace}
\newcommand{\ka}{\ensuremath{\varkappa}\xspace}
\newcommand{\la}{\ensuremath{\lambda}\xspace}
\newcommand{\lam}{\ensuremath{\lambda}\xspace}% Don't use. For compatibility.
\renewcommand{\r}{\ensuremath{\rho}\xspace}% renewed command!
\newcommand{\ro}{\ensuremath{\varrho}\xspace}
\newcommand{\sig}{\ensuremath{\varsigma}\xspace}
\newcommand{\fie}{\ensuremath{\varphi}\xspace}
\newcommand{\w}{\ensuremath{\omega}\xspace}

% Bracketting


% Square and curly braces have a special mathematical meaning 
% and are not to be interchanged with round braces as grouping devices. 
% While this interchange is (sometime) a good thing in handwritten notes, 
% it is quite poor as a typographical style where braces can be given different 
% sizes as the grouping hierarchy grows (instead of changing their shape).

% Grouping: ``q'' stands for ``quote'' and ``p'' parentheses, 
% by default we do \left(\right) but it may be better to tune 
% it by hand, thus the \big, \Big, etc. versions.
\newcommand{\qp}[1]{\ensuremath{\!\left({#1}\right)}}
\newcommand{\qpreg}[1]{\ensuremath{(#1)}}
\newcommand{\qpbig}[1]{\ensuremath{\big(#1\big)}}
\newcommand{\qpBig}[1]{\ensuremath{\Big(#1\Big)}}
\newcommand{\qpbigg}[1]{\ensuremath{\bigg(#1\bigg)}}
\newcommand{\qpBigg}[1]{\ensuremath{\bigg(#1\Bigg)}}
% When other braces are used for grouping we use b: braces, c: curly, a: angle
\newcommand{\qb}[1]{\ensuremath{\!\left[{#1}\right]}}
\newcommand{\qbreg}[1]{\ensuremath{[#1]}}
\newcommand{\qbbig}[1]{\ensuremath{\big[#1\big]}}
\newcommand{\qbBig}[1]{\ensuremath{\Big[#1\Big]}}
\newcommand{\qbbigg}[1]{\ensuremath{\bigg[#1\bigg]}}
\newcommand{\qbBigg}[1]{\ensuremath{\bigg[#1\Bigg]}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\qc}[1]{\ensuremath{\left\{{#1}\right\}}}
\newcommand{\qcreg}[1]{\ensuremath{\{#1\}}}
\newcommand{\qcbig}[1]{\ensuremath{\big\{#1\big\}}}
\newcommand{\qcBig}[1]{\ensuremath{\Big\{#1\Big\}}}
\newcommand{\qcbigg}[1]{\ensuremath{\bigg\{#1\bigg\}}}
\newcommand{\qcBigg}[1]{\ensuremath{\bigg\{#1\Bigg\}}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\qa}[1]{\ensuremath{\left\langle{#1}\right\rangle}}
\newcommand{\qareg}[1]{\ensuremath{\langle#1\rangle}}
\newcommand{\qabig}[1]{\ensuremath{\big\langle#1\big\rangle}}
\newcommand{\qaBig}[1]{\ensuremath{\Big\langle#1\Big\rangle}}
\newcommand{\qabigg}[1]{\ensuremath{\bigg\langle#1\bigg\rangle}}
\newcommand{\qaBigg}[1]{\ensuremath{\Bigg\langle#1\Bigg\rangle}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\prop}[1]{\qp{#1}}% proposition in logic
% Intervals
\newcommand{\opinter}[2]{\ensuremath{\left(#1,#2\right)}\xspace}
\newcommand{\clinter}[2]{\ensuremath{\left[#1,#2\right]}\xspace}
\newcommand{\opclinter}[2]{\ensuremath{\left(#1,#2\right]}\xspace}
\newcommand{\clopinter}[2]{\ensuremath{\left[#1,#2\right)}\xspace}
% Quotes
\newcommand{\mathquote}[1]{\ensuremath{\text{``}#1\text{''}}}
% Other bracketting operators
\newcommand{\powqp}[2]{\ensuremath{\qp{#2}^{\kern -.2em\lower .3ex\hbox{\scriptsize $#1$}}\kern-.3em}}
\newcommand{\psqrt}[1]{\powqp{1/2}{#1}}
\newcommand{\norm}[1]{\ensuremath{\left|#1\right|}}
\newcommand{\normreg}[1]{\ensuremath{|#1|}}
\newcommand{\abs}[1]{\ensuremath{\left|#1\right|}}
\newcommand{\Norm}[1]{\ensuremath{\left\|#1\right\|}}
\newcommand{\Normreg}[1]{\ensuremath{\|#1\|}}
\newcommand{\Normbig}[1]{\ensuremath{\big\|#1\big\|}}
\newcommand{\Norminfty}[1]{\Norm{#1}_\infty}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\ltwop}[2]{\ensuremath{\qa{#1,#2}}}
\newcommand{\ltwopreg}[2]{\ensuremath{\qareg{#1,#2}}}
\newcommand{\ltwopbig}[2]{\ensuremath{\qabig{#1,#2}}}
\newcommand{\ltwopBig}[2]{\ensuremath{\qaBig{#1,#2}}}
\newcommand{\ltwopbigg}[2]{\ensuremath{\qabigg{#1,#2}}}
\newcommand{\ltwopBigg}[2]{\ensuremath{\qaBigg{#1,#2}}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\crochet}[2]{\ensuremath{\left\langle #1,#2\right\rangle}}
\newcommand{\duality}[2]{\ensuremath{\left\langle #1\,\vert\,#2\right\rangle}}
\newcommand{\pairing}[2]{\ensuremath{\qp{#1,#2}}}
\newcommand{\ensemble}[2]{\ensuremath{\left\{ #1:\;#2 \right\}}}
\newcommand{\floor}[1]{\ensuremath{\lfloor{#1}\rfloor}}
\newcommand{\ceil}[1]{\ensuremath{\lceil{#1}\rceil}}
\newcommand{\setof}[1]{\qc{#1}}
\newcommand{\eventof}[1]{\setof{#1}}
\newcommand{\vecof}[1]{\begin{pmatrix}{#1}\end{pmatrix}}
\newcommand{\matof}[1]{\vecof{#1}}
\newcommand{\pair}[2]{\qp{#1,#2}}
% Sequence notation
% For the babies
\newcommand{\sq}[1]{\ensuremath{\boldsymbol{\mathsf{#1}}}}
\newcommand{\sqval}[1]{\ensuremath{\sq{#1}(\naturals)}}
% Sequences for the adults
\newcommand{\seqof}[1]{\qp{#1}}% in analogy to setof
\newcommand{\seq}[1]{\seqof{#1}}% same as seqof, kept for compatibility
% sequence (implicit index/no index set) % example \seqi xn
\newcommand{\seqi}[2]{\seq{#1_{#2}}}
\newcommand{\sequ}[2]{\seq{#1^{#2}}}% with superindex
\newcommand{\seqival}[2]{\ensuremath{\setof{#1_{#2}}}}% set of values (subindex)
\newcommand{\sequval}[2]{\setof{#1^{#2}}}% set of values (superindex)
% sequence (explicit index/with index set) % example \seqs{x_n}{I}
\newcommand{\seqs}[2]{\seq{#1}_{#2}}
% sequence (implicit index/with index set) % example \seqsi
\newcommand{\seqsi}[3]{{\seqi{#1}{#2}}_{#2\in#3}}
\newcommand{\seqsu}[3]{{\sequ{#1}{#2}}_{#2\in#3}}
\newcommand{\seqsval}[2]{\ensemble{#1}{#2}}
\newcommand{\seqsival}[3]{\ensemble{#1_{#2}}{#2\in#3}}
\newcommand{\seqsuval}[3]{\ensemble{#1^{#2}}{#2\in#3}}
% the following is for finite sequences
\newcommand{\seqsfromto}[4]{\seqs{#1}{\rangefromto{#2}{#3}{#4}}}
\newcommand{\seqsifromto}[4]{\seqi{#1}{#2}_{\rangefromto{#2}{#3}{#4}}}
\newcommand{\seqsufromto}[4]{\sequ{#1}{#2}_{\rangefromto{#2}{#3}{#4}}}
\newcommand{\seqsivalfromto}[4]{\seqival{#1}{#2}_{\rangefromto{#2}{#3}{#4}}}
\newcommand{\seqsuvalfromto}[4]{\sequval{#1}{#2}_{\rangefromto{#2}{#3}{#4}}}
% the image/trace of a sequence
\newcommand{\sqin}[2]{\seqsival{#1}{#2}{\naturals}}
% summations and products
\newcommand{\sumsi}[3]{\ensuremath{\sum_{#2\in#3}{#1}_{#2}}}
\newcommand{\sumsu}[3]{\ensuremath{\sum_{#2\in#3}{#1}^{#2}}}
\newcommand{\sumifromto}[3]{\ensuremath{\sum_{#1=#2}^{#3}}}
\newcommand{\sumsifromto}[4]{\ensuremath{\sumifromto{#2}{#3}{#4}{#1}_{#2}}}
\newcommand{\prodifromto}[3]{\ensuremath{\prod_{#1=#2}^{#3}}}
\newcommand{\prodsifromto}[4]{\ensuremath{\prodifromto{#2}{#3}{#4}{#1}_{#2}}}
% series
\newcommand{\serx}[1]{\ensuremath{\sum_{#1=1}^\infty}}
\newcommand{\serxfrom}[2]{\ensuremath{\sum_{#1=#2}^\infty}}
\newcommand{\seri}[2]{\ensuremath{\sum_{#2=1}}^\infty#1_{#2}}
\newcommand{\serifrom}[3]{\ensuremath{\sum_{#2=#3}}^\infty#1_{#2}}
% components of vectors, restrictions, etc.
\newcommand{\vecentry}[2]{\qb{#1}_{#2}}

\newcommand{\jump}[1]{\ensuremath{\left\llbracket #1\right\rrbracket}}
\newcommand{\ujump}[1]{\ensuremath{\left\lfloor #1\right\rfloor}}
\newcommand{\Jump}[1]{\jump{#1}}% Don't use! Kept for compatibility.

\newcommand{\fromto}[2]{\ensuremath{\left[#1:#2\right]}}
\newcommand{\fromstepto}[3]{\ensuremath{\left[#1:#2:#3\right]}}
% \newcommand{\rangefromto}[3]{{#2}\leq{#1}\leq{#3}}
\newcommand{\integerbetween}[2]{\ensuremath{\in\fromto{#1}{#2}}}
\newcommand{\rangefromto}[3]{\ensuremath{#1\integerbetween{#2}{#3}}}

% Some ``upright'' symbols

\newcommand{\loc}{\ensuremath{\mathrm{loc}}}
\newcommand{\cs}{\ensuremath{\mathrm{c}}}
\newcommand{\e}{\ensuremath{\operatorname{e}}\xspace}
\newcommand{\ic}{\ensuremath{\operatorname{i}}\xspace}

\newcommand{\Loneloc}{\ensuremath{\LL_1^{\!\loc}}}

% Differential Operator Sign

\renewcommand{\d}{\ensuremath{\,\mathrm{d}}}
\newcommand{\ds}[1]{\ensuremath{\,\operatorname s(\mathrm d#1)}}
%\providecommand{\D}{\ensuremath{\,\operatorname{D}}}
 \providecommand{\D}{\ensuremath{\mathrm{D}}}

% The ``registered'' symbol

\newcommand{\registered}{
  \ensuremath{{}^{\bigcirc\!\;\!\!\!\!\!\!\!\;\text{\sc r}}}}

% Mathematical ``text'' operators
\newcommand{\adjoint}[1]{\ensuremath{{#1}^*}}
\newcommand{\AS}{\ensuremath{\quad\text{as }}}
\newcommand{\AND}{\ensuremath{\text{ and }}}
\newcommand{\AAND}{\ensuremath{\times}}
\newcommand{\SAND}{\ensuremath{\quad\AND\quad}}
\newcommand{\OR}{\ensuremath{\text{ or }}}
\newcommand{\AOR}{\ensuremath{+}}
\newcommand{\NOT}{\ensuremath{\operatorname{not}}\xspace}
\newcommand{\ANOT}{\ensuremath{1-}}
\newcommand{\TRUE}{\ensuremath{1}}
\newcommand{\FALSE}{\ensuremath{0}}
\newcommand{\IS}{\ensuremath{\triangleright}}
\newcommand{\arcsec}{\operatorname{arcsec}}           % inverse secant function
\newcommand{\ball}{\operatorname{B}}                  % ball symbol
\newcommand{\Ball}[2]{\ball_{{#2}}{\left({#1}\right)}}
% Ball of center #1 and radius #2.
\newcommand{\Disc}[2]{\Ball{#1}{#2}}
\newcommand{\dBall}[3]{\ball^{#1}_{#3}{\left(#2\right)}}
% Ball of center #1 and radius #2 in dimension #3
\newcommand{\card}{\ensuremath{\#}}
\providecommand{\const}{\operatorname{const}}            % constant
\newcommand{\constant}[1]{C_{#1}}
\newcommand{\constext}[1]{\constant{\text{#1}}}            % constant
\newcommand{\codim}{\operatorname{codim}}            % codimension
\newcommand{\codomain}{\operatorname{Cod}}
\newcommand{\Cconjugate}[1]{\overline{#1}}
\providecommand{\diag}{\operatorname{diag}}
\providecommand{\Diag}{\operatorname{Diag}}
\newcommand{\diam}{\operatorname{diam}}
\newcommand{\dist}{\ensuremath{\operatorname{\mathcal D}(\W)}}
\renewcommand{\div}{\operatorname{div}}
\newcommand{\Div}{\operatorname{Div}}
\newcommand{\dom}{\operatorname{Dom}}
\newcommand{\domain}{\dom}
\newcommand{\esssup}{\operatorname{ess\,sup}}         % Essential supremum
\newcommand{\graph}{\operatorname{graph}}
\newcommand{\hausmeas}{\operatorname{\cH}}            % Hausdorff measure
\newcommand{\hcf}[2]{\operatorname{hcf}\left(#1,#2\right)}
\newcommand{\hmone}{\hausmeas^1}                      % Hausdorff meas dim 1
\newcommand{\interior}{\operatorname{int}}
\newcommand{\id}{\operatorname{id}}
\newcommand{\inverse}[1]{\ensuremath{{#1}^{-1}}}
\newcommand{\inverseqb}[1]{\inverse{\qb{#1}}}
\newcommand{\inversemat}[1]{\inverse{\mat{#1}}}
\renewcommand{\Im}{\operatorname{im}}                 % imaginary part
\newcommand{\image}{\operatorname{Img}}               % image
\newcommand{\length}{\operatorname{length}}           % length
\newcommand{\lcm}[2]{\operatorname{lcm}\left(#1,#2\right)}
\newcommand{\lebmeas}[1]{\left|#1\right|}             % Lebesgue measure
\newcommand{\fraclpp}[2]{(#1)/(#2)}
\newcommand{\fraclpf}[2]{(#1)/#2}
\newcommand{\fraclfp}[2]{#1/(#2)}
\newcommand{\fracl}[2]{{#1}/{#2}}
\newcommand{\Map}[2]{\ensuremath{\operatorname{Map}\left(#1,#2\right)}}
\providecommand{\rank}{\operatorname{rank}}
\newcommand{\Span}{\operatorname{span}}
\newcommand{\old}{\mathrm{old}}
\newcommand{\new}{\mathrm{new}}
\newcommand{\eye}{\operatorname{\bf I}}               % identity matrix
\newcommand{\zeromat}{\operatorname{\bf O}}           % zero matrix
\newcommand{\Id}{\operatorname{Id}}                   % identity operator
\newcommand{\idon}[1]{\id_{#1}}                       % identity function on a set #1.
\newcommand{\Idon}[1]{\id_{#1}}                       % identity operator on a set #1.
\newcommand{\meas}[1]{\operatorname{meas}#1}          % measure
\newcommand{\area}[1]{\operatorname{area}#1}          %area
\newcommand{\meshsize}[1]{\operatorname{meshsize}(#1)}
\newcommand{\maxi}[2]{#1\vee#2}                       % biggest of two
\newcommand{\mini}[2]{#1\wedge#2}                     % smallest of two
\renewcommand{\neg}[1]{\left[#1\right]_-}
% negative part (obsolete) kept for compatibility
\newcommand{\negpart}[1]{\left[#1\right]_-}           % negative part
%\newcommand{\negativepart}{\operatorname{neg}}
\newcommand{\Oh} {\operatorname{O}}                   % Landau's Big O
\newcommand{\oh} {\operatorname{o}}                   % Landau's Small o
% Partial derivatives (del style)
\newcommand{\pd}[2]{\ensuremath{\partial_{#1}{#2}}\xspace} % basic
\newcommand{\nthpd}[3]{\ensuremath{\partial_{#1}^{#2}{#3}}}
\newcommand{\secpd}[2]{\nthpd{#1}2{#2}} % second
\newcommand{\dt}{\ensuremath{\d_t}}
\newcommand{\pdt}[1]{\pd t{#1}}                       % Partial derivative in t
\newcommand{\pdtt}[1]{\pd{tt}{#1}}                    % Second partial in t
\newcommand{\dd}[1]{\ensuremath{\frac{\d}{\d{#1}}}}    % Total derivative in #1
\newcommand{\ddpow}[2]{\ensuremath{\frac{\d^{#2}}{\d{#1}^{#2}}}}
\newcommand{\ddt}[1]{\dd t{#1}}    % Total time derivative in #1
\newcommand{\dder}[2]{\frac{\d #1}{\d #2}}
\newcommand{\pder}[2]{\frac{\partial  #1}{\partial #2}}
\newcommand{\pospart}[1]{\left[#1\right]^+}           % positive part
\newcommand{\pow}[1]{\operatorname{pow}^{#1}}                 % power function
\renewcommand{\Re}{\operatorname{re}}                 % real part
\newcommand{\reg}{{\operatorname{reg}}}                 % regular part
\newcommand{\sng}{{\operatorname{sng}}}                 % singular part
\newcommand{\sign}{\operatorname{sign}}               % sign function
\providecommand{\supp}{\operatorname{spt}}                % support (of a function)
\newcommand{\trace}{\operatorname{trace}}             % trace (of a matrix)
\newcommand{\transpose}{{\boldsymbol\intercal}}   % transpose symbol
\newcommand{\Transpose}[1]{\ensuremath{{#1}^{\transpose}}}
\newcommand{\Transposevec}[1]{\Transpose{\vec{#1}}}
\newcommand{\transposevec}[1]{\Transposevec{#1}}
\newcommand{\Transposemat}[1]{\Transpose{\mat{#1}}}
\newcommand{\transposemat}[1]{\Transposemat{#1}}
\newcommand{\Transinverse}[1]{\Transpose{{{#1}^{-}}}}
% transpose operator
\newcommand{\rowvec}[1]{\ensuremath{\left(#1\right)}}
\newcommand{\colvec}[1]{\ensuremath{\Transpose{\left(#1\right)}}}
% transpose vector
% with components
\newcommand{\colvecdotsfromto}[3]{\colvec{{#1}_{#2},\dotsc,{#1}_{#3}}}
\newcommand{\discolvec}[1]{\ensuremath{\begin{bmatrix}#1\end{bmatrix}}}
\newcommand{\disrowvec}[1]{\ensuremath{\begin{bmatrix}#1\end{bmatrix}}}
\newenvironment{dismatrix}{\begin{bmatrix}}{\end{bmatrix}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% symbolic (non-text) mathematical operators
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Integral operators
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Average operators
\newcommand{\mint}{\ensuremath{{\text{\bf{-\!}-}}\!\!\!\!\!\!\int}}
\newcommand{\smint}{\ensuremath{{\text{\textbf{-}}}\!\!\!\!\int}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% differential and derivative operators
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\lap}{\ensuremath{\Delta}}
\newcommand{\Harm}[1]{\ensuremath{(-\Delta)^{#1}}}% polyharmonic operator
%\newcommand{\gaussrv}[2]{\ensuremath{\operatorname{N}\left(#1,#2\right)}}
% Derivative operator
%\newcommand{\normalder}{\ensuremath{\partial_{\vec n}}}
\newcommand{\normalder}{\ensuremath{\vec n}\inner\grad}
\newcommand{\Dnormale}[1]{\ensuremath{\frac{\partial#1}{\partial\nu}}}
\newcommand{\DDnormale}[2]{\ensuremath{\frac{\partial^{#1}#2}{\partial\nu^{#1}}}}
\newcommand{\compose}[2]{\ensuremath{#1}\,\circ\:{#2}}
\newcommand{\Hess}{\ensuremath{\D^2}}
% General set theory
\newcommand{\intersected}{\ensuremath{\cap}}
\newcommand{\meet}{\intersected}
\newcommand{\intersection}[1]{\ensuremath{\bigcap}_{#1}}
\newcommand{\united}{\ensuremath{\cup}}
\newcommand{\join}{\united}
\newcommand{\union}[1]{\ensuremath{\bigcup}_{#1}}
\newcommand{\Parti}[1]{\ensuremath{\cP\left(#1\right)}}% power set
\renewcommand{\complement}[1]{\ensuremath{{#1}^\mathrm{c}}}
\newcommand{\symdiff}{\ensuremath{\triangle}}
\newcommand{\PROP}[1]{\ensuremath{\boldsymbol #1}}% proposition in logic
% vectors and matrices
\renewcommand{\vec}[1]{\ensuremath{\boldsymbol{#1}}}
\newcommand{\geovec}[1]{\ensuremath{\boldsymbol{#1}}}
\newcommand{\geomat}[1]{\ensuremath{\boldsymbol{#1}}}
\newcommand{\arrowvec}[1]{\ensuremath{\overrightarrow{#1}}}
\newcommand{\dotvec}[1]{\ensuremath{\dot{\vec{#1}}}}
\newcommand{\tildevec}[1]{\ensuremath{\widetilde{\vec{#1}}}}
\newcommand{\mat}[1]{\vec{#1}}
\newcommand{\num}[1]{\ensuremath{\mathsf{#1}}}
\newcommand{\numvec}[1]{{\vec{\num{\lowercase{#1}}}}}
\newcommand{\nummat}[1]{\numvec{\uppercase{#1}}}
\newcommand{\dotnumvec}[1]{\ensuremath{\dot{\numvec{#1}}}}
\newcommand{\transnumvec}[1]{\Transpose{\numvec{#1}}}
% Probability
\newcommand{\Prob}{\ensuremath{\operatorname{Prob}}}
\providecommand{\prob}{\ensuremath{P}}
\newcommand{\law}[1]{\ensuremath{\operatorname{law}_{#1}}\xspace}
\newcommand{\cdf}[1]{\ensuremath{\operatorname{cdf}_{#1}}\xspace}
\newcommand{\distrib}[1]{\cdf{#1}}
\newcommand{\pdf}[1]{\ensuremath{\operatorname{pdf}_{#1}}\xspace}
\newcommand{\density}[1]{\pdf{#1}}
\newcommand{\erf}{\ensuremath{\operatorname{erf}}\xspace}
\newcommand{\chf}[1]{\ensuremath{\operatorname{chf}_{#1}}\xspace}
% Covariance
\newcommand{\Cov}{\ensuremath{\operatorname{cov}}}
\newcommand{\cov}{\ensuremath{\operatorname{cov}}}
% Expectation
\newcommand{\EX}{\operatorname{E}}
\newcommand{\var}{\operatorname{var}}
\newcommand{\Var}{\operatorname{var}}
% Gaussian (i.e., normally distributed) random variable
\newcommand{\ndistr}{\operatorname{N}}
\newcommand{\gaussrv}[2]{\ensuremath{\ndistr\left({#1},{#2}\right)}}
% symbols
%\newcommand{\boundary}{\partial}
% Double asterisc
\newcommand{\Ast}{\ensuremath{{\ast\ast}}}
% Functional spaces
% Letters (these are kept for compatibility)
\newcommand{\CC}{\ensuremath{\operatorname C}\xspace}%Continuous functions
\newcommand{\HH}{\ensuremath{\operatorname H}\xspace}
\newcommand{\LL}{\ensuremath{\operatorname L}\xspace}
\newcommand{\VV}{\ensuremath{\operatorname V}\xspace}
\newcommand{\WW}{\ensuremath{\operatorname W}\xspace}

% Continuous spaces
\newcommand{\cont}[1]{\ensuremath{\CC^{#1}}}
\newcommand{\contc}[1]{\ensuremath{\cont{#1}_{\mathrm{c}}}}

% Lebesgue spaces
\newcommand{\leb}[1]{\ensuremath{\LL^{#1}}}

% Sobolev spaces
\newcommand{\sob}[2]{\ensuremath{\WW^{#1}_{#2}}}
\newcommand{\sobz}[2]{\ensuremath{{\overset{\smash{\scriptscriptstyle\circ}}\WW}{}^{#1}_{#2}}}
\newcommand{\sobh}[1]{\ensuremath{\HH^{#1}}}
\newcommand{\sobhz}[1]{\ensuremath{{\overset{\smash{\scriptscriptstyle\circ}}\HH}{}^{#1}}}
\renewcommand{\sobhz}[1]{\ensuremath{\HH}^{#1}_0}
\newcommand{\lebz}[1]{\ensuremath{{\overset{\smash{\scriptscriptstyle\circ}}\LL}{}^{#1}}}
% Lipschitz and Hölder spaces
\newcommand{\Lip}{\ensuremath{\operatorname{Lip}}}

\newcommand{\conv}[1]{\ensuremath{\operatorname{Conv}}\qp{\closure{#1}}}

% polynomials
\newcommand{\poly}[1]{\ensuremath{\rP}^{#1}}

% finite elements
\newcommand{\fespace}{\rV}
\newcommand{\fezerospace}{\smash{\mathring\fespace}}
\newcommand{\fes}[1]{\ensuremath{\fespace^{#1}}}
% \newcommand{\fez}[1]{\ensuremath{{\overset{\scriptscriptstyle\circ}{\rV}}{}^{#1}}}
\newcommand{\fez}[1]{\ensuremath{\fezerospace^{#1}}}
\newcommand{\fesh}{\ensuremath{\fespace_h}}
\newcommand{\fezh}{\ensuremath{\fezerospace_h}}

\newcommand{\EOC}{\ensuremath{\operatorname{EOC}}\xspace}
\newcommand{\EOCs}{\ensuremath{\operatorname{EOCs}}\xspace}

% Logical operators and quantifiers
\newcommand{\Forall}{\:\forall\:}
\newcommand{\Exists}{\:\exists\:}
\newcommand{\Foreach}{\quad\Forall}
% Arrows and relations
\newcommand{\setnot}{\slash}
%\usepackage{amscd}
\newcommand{\relation}[1]{\,{#1}\,}
\newcommand{\relationnot}[1]{\not\!{#1}\,\,}
\newcommand{\divides}{\mid}
\newcommand{\dividesnot}{\nmid}
\newcommand{\ideq}{\equiv}
\newcommand{\funk}[3]{\ensuremath{#1:#2\to#3}}
\newcommand{\funkmapsto}[6][]{\ensuremath{{#2}:{#4}\ni{#3}\mapsto{#5}\in{#6#1}}}
\newcommand{\dfunkmapsto}[6][]{\ensuremath{
    \begin{array}{rccl}
      {#2}: & {#4} &  \to   & {#6}
      \\
      & {#3} &\mapsto & {#5#1}
    \end{array}\quad}}
\newcommand{\setmapsto}[4]{\ensuremath{{#2}\ni{#1}\mapsto{#3}\in{#4}}}
\newcommand{\dsetmapsto}[4]{\ensuremath{
    \begin{array}{rccl}
      & {#2} &  \to   & {#4}
      \\
      & {#1} &\mapsto & {#3}
    \end{array}\quad}}
\newcommand{\onetoone}[3]{\ensuremath{#1:#2\leftrightarrows#3}}
\renewcommand{\implies}{\ensuremath{\:\Rightarrow\:}\xspace}
\newcommand{\notimplies}{\ensuremath{\:\Arrownot\Rightarrow\:}\xspace}
\newcommand{\THEN}{\implies}
\newcommand{\LIF}{\ensuremath{\:\Leftarrow\:}\xspace}
% \newcommand{\IF}{\ensuremath{\:\Leftarrow\:}\xspace}
% clashes with ALGORITHMIC
\newcommand{\equivale}{\ensuremath{\:\Leftrightarrow\:}\xspace}
\newcommand{\IFF}{\equivale}
\newcommand{\LIFF}{\equivale}
\newcommand{\contradiction}{\ensuremath{\:\lightning\:}\xspace}
\newcommand{\downto}{\ensuremath{\searrow}}
\newcommand{\upto}{\ensuremath{\nearrow}}
\newcommand{\Wrightarrow}{\ensuremath{{\rightharpoonup}}}
\newcommand{\convergent}[1]{
  \ensuremath{
    \begin{CD}
      @>{\scriptscriptstyle #1}>>
    \end{CD}
  }
}

\newcommand{\Convergent}[2]{
  \ensuremath{
    \begin{CD}
      @>{\scriptscriptstyle #1}>{\scriptscriptstyle #2}>
    \end{CD}
  }
}
\newcommand{\weaklyconvergent}[1]{
  \ensuremath{\begin{CD}
      @>{\scriptscriptstyle #1}
      >{\scriptscriptstyle{\mathrm{weakly}}}>
    \end{CD}
  }
}
\newcommand{\toas}[1]{\ensuremath{\begin{CD}@>{\phantom{:}}>{#1}>\end{CD}}}
\newcommand{\equipotent}{\rightleftarrows}
\newcommand{\imbedded}{\ensuremath{\hookrightarrow}}
\newcommand{\embedded}{\ensuremath{\hookrightarrow}}
\newcommand{\assignvalue}{\ensuremath{:=}}
\def\comp{\lhook\joinrel\lhook\joinrel\rightarrow}
\newcommand{\compactlyimbedded}{
  \ensuremath{\overset{\mathrm{comp}}{\hookrightarrow}}}
\newcommand{\finerthan}{\prec}
\newcommand{\rougherthan}{\succ}
\newcommand{\coarserthan}{\succ}
\renewcommand{\restriction}[2]{\left.#1\right|_{#2}}
\newcommand{\evalat}[2]{\qb{#1}_{#2}}
\newcommand{\punto}{\ensuremath{\bullet}\ }
% Accents and embellishments
\newcommand{\hhat}[1]{\hat{\hat{#1}}} % double hat
\newcommand{\ccheck}[1]{\check{\check{#1}}} % double reversed hat

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% TEXT
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% General text commands
\newcommand{\aka}[1]{(also known as {#1})\xspace}
% Common Abbreviations
\newcommand{\ode}{ODE\xspace}
\newcommand{\odes}{ODE's\xspace}
\newcommand{\ivp}{IVP\xspace}
\newcommand{\ivps}{IVP's\xspace}
\newcommand{\DNE}{\ensuremath{\text{ DNE}}\xspace}
% Some commands for uniform style (may be changed locally)
\newcommand\bs{\char '134}   %  a backslash character for the \tt font
\newcommand{\Program}[1]{\textsf{#1}\xspace}
\newcommand{\Source}[1]{\textsf{#1}\xspace}
\newcommand{\Algoname}[1]{\ensuremath{\text{\textsf{#1}\xspace}}}
\newenvironment{unixprompt}{\begin{verbatim}}{\end{verbatim}}
\newcommand{\texcommand}[1]{\texttt{\bs{#1}}}
\newcommand{\codename}[1]{\texttt{#1}\xspace}
\newcommand{\filename}[1]{\texttt{#1}\xspace}
\newcommand{\codevarname}[1]{\texttt{#1}\xspace}
% Non mathematical miscellaneous symbols
% Currency symbols
\newcommand{\sterling}{\ensuremath{\pounds}\xspace}
\providecommand{\euro}{EUR}
\newcommand{\euros}{\ensuremath{\text{\textgreek{\euro}}}\xspace}
%\newcommand{\C}{\textsf{C}\xspace}
\newcommand{\matlab}{\Program{Matlab\registered}}
\newcommand{\octave}{\Program{Octave}}
\newcommand{\scilab}{\Program{Scilab}}
\newcommand{\perl}{\Program{Perl}}
\newcommand{\albert}{\Program{ALBERTA}}
\newcommand{\alberta}{\Program{ALBERTA}}
\newcommand{\gltools}{\Program{GL Tools}}
\newcommand{\linux}{\Program{Linux}}
\newcommand{\caesar}{\Program{cæsar}}
\newcommand{\ingenious}{Ingenio{\textsc{US}}\xspace}
\newcommand{\codeprint}[1]{
  \par
  \begin{center}
    \framebox{
      \small
      \begin{minipage}{0.9\textwidth}
	\framebox{Printout of file \codename{#1}}
	\\
	\verbatiminput{#1}
      \end{minipage}
    }
  \end{center}
  \par
}
% The section symbol and the reference to sections
\newcommand{\secsymbol}{\S}
\newcommand{\secsymbols}{\S\S}
\newcommand{\secref}[1]{\secsymbol\ref{#1}}
\newcommand{\charef}[1]{Ch.~\ref{#1}}
\newcommand{\equa}[1]{(#1)}
\newcommand{\proveimplies}[2]{\par[{#1}\implies{#2}]}
\newcommand{\proveequivale}[2]{\par[{#1}\equivale{#2}]}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% FORMATTING MACROS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\eqncomment}[1]{\ensuremath{\qquad\qp{\text{{#1}}}}}
\renewcommand{\because}[1]{\ensuremath{\qquad\text{({#1})}}}
\newcommand{\underbracedescribe}[2]{\ensuremath{\underbrace{#1}_{\text{#2}}}}
\newcommand{\underbracedefine}[2]{\ensuremath{\underbrace{#1}_{\displaystyle=:#2}}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newenvironment{Hint}{\par\textit{Hint}.}{\par}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% LISTS (Because I am unhappy with the spacing provided by the
% enumerate package)
\providecommand{\ListParameters}{}
\renewcommand{\ListParameters}{% these can be changed by renewcommand
  \setlength{\topsep}{0em}
  \setlength{\leftmargin}{0em}
  \setlength{\itemsep}{0ex}
  \setlength{\parsep}{.5ex}
  \setlength{\itemindent}{\labelsep}
  \addtolength{\itemindent}{\labelwidth}
}
\newcounter{tmpcounter}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% (a) item
\newcounter{LetterListItem}
\renewcommand{\theLetterListItem}{(\alph{LetterListItem})}
\newenvironment{LetterList}{%
  \begin{list}%
    {\theLetterListItem\ }%
    {\usecounter{LetterListItem}
      \ListParameters
    }
}{%
\end{list}}
% 1. item
\newcounter{NumberListItem}
\renewcommand{\theNumberListItem}{\arabic{NumberListItem}}
\newenvironment{NumberList}{%
  \begin{list}%
    {\theNumberListItem.\ }%
    {\usecounter{NumberListItem}%
      \ListParameters
    }
}{%
\end{list}}
% Question 1. item
\newcounter{QuestionListItem}
\renewcommand{\theQuestionListItem}{\textbf{Question \arabic{QuestionListItem}}}
\newenvironment{QuestionList}{%
  \begin{list}%
    {\theQuestionListItem.\ }%
    {\usecounter{QuestionListItem}%
      \ListParameters
    }
}{%
\end{list}}
%(i) item
\newcounter{RomanListItem}
\renewcommand{\theRomanListItem}{(\roman{RomanListItem})}
\newenvironment{RomanList}{%
  \begin{list}%
    {\theRomanListItem\ }%
    {\usecounter{RomanListItem}
      \ListParameters
    }
}{%
\end{list}}
% Steps environement
\newcounter{StepsItem}
%\newcommand{\StepsItem}{\arabic{StepsItem}}
\newenvironment{Steps}{%
  \begin{list}%
    {Step \theStepsItem.\ }%
    {\usecounter{StepsItem}%
      \ListParameters
    }
}{%
\end{list}}
\providecommand{\claim}[1]{\textsl{#1}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% extra shortcuts to override some annoying package/class writers
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\providecommand{\grad}{\nabla}
\renewcommand{\grad}{\nabla}

%\usepackage{amsthm} % an extra package for theorem-like environments
%
% SECTION COUNTING AND STYLE
%\ifthenelse{\boolean{isthesis}}{%
%  \setcounter{secnumdepth}{1}%
%}{
%  \setcounter{secnumdepth}{2} % this number is the depth of numbering
%}
%
% LISTS (Because I was unhappy with the spacing provided by the
% enumerate package: here are only the parameters, definitions
% are in shortcuts.sty file)
%
\providecommand{\ListParameters}{}
\renewcommand{\ListParameters} {
  \setlength{\topsep}{0em}
  \setlength{\leftmargin}{0em}
  \setlength{\itemsep}{0ex}
  \setlength{\parsep}{.5ex}
  \setlength{\itemindent}{\labelsep}
  \addtolength{\itemindent}{\labelwidth}
}
% ENVIRONMENTS
% Service environements (Useful for preliminary typesetting)
%
% Theorem-like environments (see the AMSTHM package documentation)
%
% Different styles are defined


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% This command controls the output of graphics: eps vs pdf
%% This is useful when you have for each graphic element a version of both
%% formats: ps and pdf and you want to switch between them
%% (some people prefer to work with ps, as dvi is faster and more reliable
%% during the production phase), but the end product is better compiled 
%% ``directly'' in pdf because converters such as pstopdf are known to 
%% produce ``bad pdf''.

%% To use it, insert \pdfformat{false} or \pdfformat{true}
%% in the preamble of your document.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\pdfformat}[1]{
  \provideboolean{pdfoutput}
  % Modify the following to obtain the pdf output properly
  \setboolean{pdfoutput}{#1}% default is dvi and ps output
  \ifthenelse{\boolean{pdfoutput}}%
	     {\typeout{using pdf}
               \usepackage{pdfsync}%for source specials directly in pdf
	       %\usepackage[pdftex]{graphicx,xcolor}
	       \newcommand{\graphext}{pdf}
	       \newcommand{\graphextex}{pdf_t}
	       \usepackage{epsfig}
	       \usepackage{tikz}
	       \usepackage{rotating}
	     }
	     {
	       \typeout{using eps}
	       \usepackage[dvips]{graphicx,xcolor}
	       \newcommand{\graphext}{eps}
	       \newcommand{\graphextex}{eps_t}
	       \usepackage{epsfig}
	       \usepackage{tikz}
	       \usepackage{rotating}
	     }
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\usepackage{ert-shortcuts}
% Command definitions specific for this document only
%%\ProvidesPackage{ert-shortcuts}
%
%
%
% Philology
\newcommand{\Aposteriori}{{Aposteriori} }%\space}
\newcommand{\aposteriori}{{aposteriori} }% \vspace}
\newcommand{\Apriori}{{Apriori} } %\vspace}}
\newcommand{\apriori}{{apriori} }%\vspace}}
%
\newcommand{\ERT}{ERT}% Elliptic Reconstruction Technique
%
% Estimators
\newcommand{\estdata}[1]{\ensuremath{\gamma_{#1}}}
\newcommand{\estf}[1]{\ensuremath{\beta_{#1}}}
\newcommand{\estspace}[1]{\ensuremath{\eta_{#1}}}
\newcommand{\esttime}[1]{\ensuremath{\theta_{#1}}}
\newcommand{\estrec}[1]{\ensuremath{\varepsilon_{#1}}}
%
\newcommand{\estimator}{\cE}
\newcommand{\ef}[3]{\ensuremath{\estimator[#1,#2,#3]}}
%\newcommand{\estfunk}[4]{\ensuremath{\estimator[#1,#2,#3,#4]}
% Indicators
\newcommand{\inddata}{\ensuremath{\gamma}}
\newcommand{\indf}{\ensuremath{\beta}}
\newcommand{\indspace}{\ensuremath{\eta}}
\newcommand{\indtime}{\ensuremath{\theta}}
\newcommand{\indrec}{\ensuremath{\varepsilon}}
%
% Sobolev spaces
\newcommand{\honew}{{\sobh1(\W)}} %H^1(\Omega)
\newcommand{\honezw}{{\sobhz1(\W)}} %H^1_0(\Omega)
\newcommand{\hmonew}{{\sobh{-1}(\W)}} %H^{-1}(\Omega}
% Mesh operations
\newcommand{\ccr}[2]{\ensuremath{{#1}\vee{#2}}}
\newcommand{\fcc}[2]{\ensuremath{{#1}\wedge{#2}}}
%
% Times
\newcommand{\tzero}{\ensuremath{t_0}}
\newcommand{\tm}{{t_m}}
\newcommand{\tms}{{t_m^*}}
\newcommand{\tn}{{t_n}}
\newcommand{\tno}{{t_{n-1}}}
\newcommand{\tnp}[1]{\ensuremath{t_{n+#1}}}
\newcommand{\TNO}{{\ensuremath{t_{N-1}}}\xspace}
\newcommand{\TN}{{\ensuremath{t_N}}\xspace}
\renewcommand{\TN}{{\ensuremath{T}}\xspace}
% Timesteps
\newcommand{\taun}{\ensuremath{\tau_n}}
\newcommand{\taunm}{\ensuremath{\tau_n^{-1}}}
\newcommand{\tauno}{\ensuremath{\tau_{n-1}}}
\newcommand{\taunp}[1]{\ensuremath{\tau_{n+{#1}}}}
\newcommand{\taunom}{\ensuremath{\tau_{n-1}^{-1}}}
\newcommand{\TAUNO}{\ensuremath{\tau_{N-1}}}
\newcommand{\TAUN}{\ensuremath{\tau_N}}
% Timesets
\newcommand{\In}{\ensuremath{(\tno,\tn]}}
% Meshsizes
\newcommand{\hn}{\ensuremath{h_n}}
\newcommand{\hno}{\ensuremath{h_{n-1}}}
\newcommand{\hathn}{\ensuremath{\hat h_n}}
\newcommand{\hhathn}{\ensuremath{\hhat h_n}}
% Functions
\newcommand{\elln}{\ensuremath{l_n}}
\newcommand{\ellno}{\ensuremath{l_{n-1}}}
\newcommand{\ut}{\partial_t u}
\newcommand{\fn}{\ensuremath{f^n}}
\newcommand{\fno}{\ensuremath{f^{n-1}}}
\newcommand{\barf}{\ensuremath{\overline f}}
\newcommand{\projf}[1]{\ensuremath{{\barf}^{#1}}}% space projection of f
\newcommand{\projfn}{\projf n}
\newcommand{\projfno}{\projf{n-1}}
\newcommand{\uzero}{u_0}
%\newcommand{\U}{\ensuremath{U}}% this could be another symbol $u_h$, e.g.
\newcommand{\um}{\ensuremath{\U^m}}
\newcommand{\un}{\U^n}
\newcommand{\uno}{\U^{n-1}}
\newcommand{\UN}{\U^N}
\newcommand{\UNO}{\U^{N-1}}
\newcommand{\UZERO}{\U^0}
\newcommand{\interpol}[1]{I^{#1}}
\newcommand{\wn}{\ensuremath{\w^n}\xspace}
\newcommand{\wno}{\ensuremath{\w^{n-1}}\xspace}
\newcommand{\rhoms}{\rho^m_*}
% Indexes
\newcommand{\ms}{{m^*}}
\newcommand{\mso}{{m^*-1}}
% Operators without arguments
\newcommand{\contA}[1]{-\div\left(\vec A\grad #1\right)}% elliptic operator
\newcommand{\pwA}{A_{\mathrm{el}}}% piecewise smooth operator
\newcommand{\an}{A^n}% discrete elliptic operator at time n
\newcommand{\ano}{A^{n-1}}% ditto at time n-1
\newcommand{\rec}{\cR}% elliptic reconstruction = mathcal R
\newcommand{\rech}{\ensuremath{\rec_h}}
\newcommand{\recf}[1]{\ensuremath{\rec^{#1}}}
% Operators with arguments
\newcommand{\lproj}[1]{P^{#1}}% l2 projection (argument is timestep)
\newcommand{\lprojh}{\lproj h}
\newcommand{\eproj}[1]{R^{#1}}% elliptic projection
\newcommand{\eprojh}{\eproj h}
% Brackets and bilinear forms
\newcommand{\abil}[2]{\ensuremath{a\left(#1,#2\right)}}
\newcommand{\abils}[2]{\ensuremath{a^*\left(#1,#2\right)}}
\newcommand{\abilh}[2]{A\qp{#1,#2}}
\newcommand{\bbil}[2]{B\qp{#1,#2}}
\newcommand{\tildebbil}[2]{\ensuremath{\tilde B\left(#1,#2\right)}}
%Discrete time derivative
%Backward
%\newcommand{\bdisc}{\ensuremath{\overset{\smash{\shortleftarrow}}\partial}}
%\newcommand{\bdisc}{\ensuremath{\tilde\partial}}
\newcommand{\bdisc}{\ensuremath{\partial}}
\newcommand{\backd}[1]{\ensuremath{\partial^{#1}}}
\newcommand{\backdn}{\backd n}
%Forward
\newcommand{\fdisc}{\ensuremath{\overset{\smash{\shortrightarrow}}\partial}}
%Second centered
%\newcommand{\sdisc}{\ensuremath{{{\tilde\partial^2}}}}
\newcommand{\sdisc}{\ensuremath{{\partial^2}}}
%Averaged backward
\newcommand{\discn}{\ensuremath{\overline\partial}}
%
\newcommand{\discoperah}{\ensuremath{A_h}}
\newcommand{\discopera}{\ensuremath{A}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\geovec}[1]{\boldsymbol{#1}}
\renewcommand{\vec}[1]{\ensuremath{\boldsymbol
    {\mathsf{#1}}}}
\renewcommand{\mat}[1]{\ensuremath{\boldsymbol
    {\mathsf{#1}}}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%\usepackage{tristan}
%%\ProvidesPackage{tristan}

%% \newenvironment{Proof}[1][{. }]
%% 	       {\noindent{\bf \Proofname\ #1}}
%% 	       {{\raggedright{{ }\hfill\qed}}} 
\newenvironment{Proof}[1][{}]%
	       {\par\noindent{\bf \Proofname\ #1}}
	       {{\raggedright{{ }\hfill\qed}}} % This will NEVER be fully automatic
	       %{\qqed\par}	 
               
% an important comment here
\begin{comment}
  %Tristan's old macros
  \newcommand{\norm}[1]{\ensuremath{\left|#1\right|}}
  \newcommand{\Norm}[1]{\ensuremath{\left\|#1\right\|}}
  \newcommand{\ltwop}[2]{\ensuremath{\left\langle#1,#2\right\rangle}}
  \newcommand{\ltwopbig}[2]{\ensuremath{\big(#1,#2\big)}}
  \newcommand{\ltwopBig}[2]{\ensuremath{\Big(#1,#2\Big)}}
  \newcommand{\ltwopbigg}[2]{\ensuremath{\bigg\langle#1,#2\bigg\rangle}}
  \newcommand{\setof}[1]{\ensuremath{\left\{#1\right\}}}
  \newcommand{\jump}[1]{\ensuremath{\left[ #1\right]}}
  \newcommand{\e}[1]{\ensuremath{e}^{#1}}
  \renewcommand{\vec}[1]{\ensuremath{\boldsymbol #1}}
  \renewcommand{\dt}{\ensuremath{\partial_t}}
  % I've changed your \dt's to \pdt's
  % unfortunately, \dt for me means the full 
  % derivative and \pdt the partial derivative
\end{comment}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Tristan's macros
\renewcommand{\ddt}{\d_t}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Fixed algorithm
\newcommand{\theHalgorithm}{\arabic{algorithm}}

\newcommand{\semidiscrete}{semidiscrete\xspace}
\newcommand{\Semidiscrete}{Semidiscrete\xspace}
\newcommand{\fullydiscrete}{fully discrete\xspace}
\newcommand{\Fullydiscrete}{Fully discrete\xspace}

%I like my e better


\renewcommand{\e}[1]{\ensuremath{e}^{#1}}
\newcommand{\Le}[1]{\ensuremath{\leb{#1}}} 
\newcommand{\hoz}{\sobhz1}
\newcommand{\htz}{\sobhz2}
\newcommand{\hob}{\sobh{1}_b(\W)}
\newcommand{\V}[1]{\fes^{#1}}
\newcommand{\Vb}[1]{\fes^{#1}_b}
\newcommand{\X}[1]{\cX^{#1}}
%\newcommand{\bi}[2]{\abil{#1}{#2}}
%\renewcommand{\bi}[2]{\ltwop{\nabla #1}{\nabla #2}}
\renewcommand{\ltwopbigg}[2]{\ensuremath{\bigg\langle#1,#2\bigg\rangle}}

%Elliptic operator
%\newcommand{\ellop}{\ensuremath{\mathfrak{A}}}
% omar has stolen stuff from here and ammended it
\newcommand{\threshhold}{\xi}
\newcommand{\coarsethresh}{\kappa}

\newcommand{\EI}{\ensuremath{\operatorname{EI}}\xspace}
\newcommand{\tol}{\ensuremath{\operatorname{tol}}\xspace}

%\newcommand{\enorm}[2]{\ensuremath{\Norm{#1}}_{dG,{#2}}}

\newcommand{\cgenorm}[2]{\ensuremath{\Norm{#1}}_{cG,{#2}}}
%Energy norm switch below for H1 semi norm
%\newcommand{\enorm}[1]{\ensuremath{\Norm{\nabla #1}}}
\newcommand{\enorm}[1]{\ensuremath{\Norm{#1}_{1,h}}}

\newcommand{\dU}[1]{\ensuremath{\partial U^{#1}}}
% this takes and argument now

\newcommand{\T}[1]{\cT^{#1}}
\newcommand{\coarseT}[1]{\cT_0^{#1}}
%Triangulation
\newcommand{\patch}[1]{\hat{#1}}
\renewcommand{\star}[1]{\tilde{#1}}

\renewcommand{\ie}{i.e.,\xspace}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% local macros
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\ellop}{\ensuremath{\cA}}
\newcommand{\laginterpol}[1]{\La^{#1}}%{\mathcal I^{#1}}
\newcommand{\coarseinterpol}[1]{\La_0^{#1}}
\newcommand{\clement}{\Pg}
\newcommand{\cleinterpol}[1]{\clement^{#1}}
\newcommand{\hatcleinterpol}[1]{{\hat\clement}^{#1}}

\renewcommand{\meas}[1]{\lvert#1\rvert}
\renewcommand{\fesh}{\ensuremath{\fespace}}
\renewcommand{\integerbetween}[2]{=\ensuremath{#1,\ldots,#2}}
\renewcommand{\rangefromto}[3]{\ensuremath{#1\integerbetween{#2}{#3}}}
\providecommand{\figwidth}{\textwidth}
%\renewcommand{\figwidth}{0.9\textwidth}
\newcommand{\figscale}{1.1}
\newcommand{\eint}[3]{\qpbigg{\int_{#1}^{#2}#3^2}^{\kern -.2em\lower .3ex\hbox{\scriptsize $1/2$}}\kern-.3em}
\newcommand{\eenorm}[3]{\eint{#1}{#2}{\enorm{#3}}}

%\renewcommand{\bi}[2]{\ensuremath{a\qp{#1,#2}}}
\renewcommand{\fes}{\ensuremath{\mathbb V}}
\newcommand{\Estfunk}{\ensuremath{\cE}}
\newcommand{\Est}[1]{\ensuremath{\Estfunk\qb{#1}}}
\newcommand{\projinter}[1]{\ensuremath{\Pg^{#1}}}


\renewcommand{\fes}{\ensuremath{\mathbb V}}
\renewcommand{\sin}[1]{\ensuremath{\operatorname{sin}\left(#1\right)}}
\renewcommand{\cos}[1]{\ensuremath{\operatorname{cos}\left(#1\right)}}
\renewcommand{\arcsin}[1]{\ensuremath{\operatorname{arcsin}\left(#1\right)}}
\renewcommand{\arctan}[1]{\ensuremath{\operatorname{arctan}\left(#1\right)}}
\newcommand{\ltwoproj}[1]{\ensuremath{\operatorname{P}_{\fes} #1}}
\newcommand{\ltwoprojW}[1]{\ensuremath{\operatorname{P}_{\fesW} #1}}
\newcommand{\ltwoprojzero}[1]{\ensuremath{\operatorname{P}_{\feszero} #1}}
\renewcommand{\tildevec}[1]{\ensuremath{\geovec{\underline{#1}}}}
\newcommand{\con}[1]{\ensuremath{\kappa(#1)}}
\newcommand{\GZZ}[1]{\ensuremath{\operatorname{G}^{#1}_{ZZ}}}
\newcommand{\GZZsq}{\ensuremath{\operatorname{G}^2_{ZZ}}}
\newcommand{\Gltwo}{\ensuremath{\operatorname{G}_{\ltwoproj{}}}}
\newcommand{\Gltwosq}{\ensuremath{\operatorname{G}_{\ltwoproj{}}^2}}
\newcommand{\myspan}[1]{\ensuremath{\operatorname{span}\left(#1\right)}}
\newcommand{\MA}{Monge--Amp\`ere }
\newcommand{\MAD}{Monge--Amp\`ere--Dirichlet }

\newcommand{\cof}[1]{\operatorname{Cof} #1}
\renewcommand{\det}[1]{\operatorname{det} #1}
\newcommand{\tensorp}[2]{\ensuremath{\left\langle#1\otimes#2\right\rangle}}
%\renewcommand{\:}[\operatorname{:}]
\newcommand{\frob}[2]{\ensuremath{{#1}{:}{#2}}}
%\renewcommand{\div}[1]{\operatorname{div}\left(#1\right)}
\renewcommand{\H}{\ensuremath{\geovec{H}}}
\newcommand{\Hs}{\ensuremath{\mathcal{H}^s}}
\newcommand{\symm}{\ensuremath{\operatorname{Sym}^+(\reals^{d\times d})}}

\newcommand{\feszero}{\accentset{\circ}{\fes}}
\newcommand{\Nzero}{\accentset{\circ}{N}}
\newcommand{\Nd}{\accentset{\bullet}{N}}

\newcommand{\Phizero}{\accentset{\circ}{\Phi}}
\newcommand{\numPhizero}{\accentset{\circ}{\numvec \Phi}}

\newcommand{\A}{\ensuremath{\geovec{A}}}
\newcommand{\N}{\ensuremath{\geovec{N}}}

\newcommand{\Npert}{\ensuremath{\tilde{\vec{N}}}}
\newcommand{\gpert}{\ensuremath{\tilde{g}}}

\newcommand{\residual}{\hR}
\newcommand{\jresidual}{\hJ}

\newcommand{\maresidual}{\mathfrak{R}}

\newcommand{\disca}[1]{A^{#1}}
\newcommand{\elop}{-\Delta}
\newcommand{\linop}{\ensuremath{\cL}}

\newcommand{\tr}[1]{\trace{#1}}
\newcommand{\osc}[2]{\operatorname{osc}(#1)_{#2}}

\newcommand{\nlfunk}{\ensuremath{F}}
\newcommand{\nlop}[1]{\ensuremath{\cN}\left[#1\right]}
\newcommand{\Dnlop}[1]{\ensuremath{\cN}'\left[#1\right]}
\newcommand{\s}{\cS}

\newcommand{\nB}{\nummat{B}}
\newcommand{\nM}{\nummat{M}}
\newcommand{\nC}{\nummat{C}}
\newcommand{\nh}{\numvec{h}}
\newcommand{\nf}{\numvec{f}}
\newcommand{\numu}{\numvec{u}}



\newcommand{\boo}{\accentset{\circ\circ}{\nB}} 
\renewcommand{\moo}{\accentset{\circ\circ}{\nM}} 
\newcommand{\coo}{\accentset{\circ\circ}{\nC}} 

\newcommand{\bod}{\accentset{{\circ}\bullet}{\nB}} 
\renewcommand{\mod}{\accentset{{\circ}\bullet}{\nM}} 
\newcommand{\cod}{\accentset{{\circ}\bullet}{\nC}} 

\newcommand{\bdo}{\accentset{\bullet{\circ}}{\nB}} 
\newcommand{\mdo}{\accentset{\bullet{\circ}}{\nM}} 
\newcommand{\cdo}{\accentset{\bullet{\circ}}{\nC}} 

\newcommand{\mdd}{\accentset{\bullet\bullet}{\nM}} 
\newcommand{\cdd}{\accentset{\bullet\bullet}{\nC}} 
\newcommand{\bdd}{\accentset{\bullet\bullet}{\nB}} 

\newcommand{\hoo}{\accentset{\circ}{\nh}} 
\newcommand{\hdd}{\accentset{\bullet}{\nh}} 

\newcommand{\uoo}{\accentset{\circ}{\numu}} 
\newcommand{\foo}{\accentset{\circ}{\nf}} 
\newcommand{\fdd}{\accentset{\bullet}{\nf}} 
\newcommand{\udd}{\accentset{\bullet}{\numu}} 

\newcommand{\gdd}{\accentset{\bullet}{\numvec g}} 

\newcommand{\goo}{\accentset{\circ}{\numvec g}} 



\renewcommand{\C}[2]{\nummat{C}_{#1#2}}
\newcommand{\B}[2]{\nummat{B}^{#1#2}}

\newcommand{\Doo}{\accentset{\circ\circ}{\nummat D}}
\newcommand{\Soo}{\accentset{\circ\circ}{\nummat S}}

\newcommand{\Co}[2]{\accentset{\phantom{\circ}\circ}{\nummat C}_{#1\phantom{}#2}}
\newcommand{\Bo}[2]{\accentset{\circ\phantom{\circ}}{\nummat B}^{#1\phantom{}#2}}

\newcommand{\Cd}[2]{\accentset{\phantom{\circ}\bullet}{\nummat C}_{#1\phantom{}#2}}
\newcommand{\Bd}[2]{\accentset{\bullet\phantom{\circ}}{\nummat B}^{#1\phantom{}#2}}


\newcommand{\Ddel}[2]{\accentset{\circ\circ}{\nummat F}_{#1#2}}

\newcommand{\Edel}{\accentset{\phantom{\circ}\bullet}{\nummat E}}
\newcommand{\delE}{\accentset{\bullet\phantom{\circ}}{\nummat E}}
\newcommand{\Cdel}{\accentset{\phantom{\circ}\bullet}{\nummat C}}
\newcommand{\bdel}{\accentset{\bullet}{\numvec b}}
\newcommand{\vdel}{\accentset{\bullet}{\numvec v}}
\newcommand{\hdel}{\accentset{\bullet}{\numvec h}}
\newcommand{\udel}{\accentset{\bullet}{\numvec u}}
\newcommand{\Phidel}{\accentset{\bullet}{\Phi}}
\newcommand{\numPhidel}{\accentset{\bullet}{\numvec \Phi}}

\newcommand{\bigB}{\nummat{\mathfrak B}}
\newcommand{\bigC}{\nummat{\mathfrak C}}
\newcommand{\bigM}{\nummat{\mathfrak M}}

\newcommand{\disgrad}[1]{\left(\overline{\nabla}#1\right)}
\newcommand{\rt}{\ensuremath{\rR \rT_0}}
\newcommand{\curl}[1]{\ensuremath{\nabla \times #1}}

\newcommand{\p}{\ensuremath{\geovec p}}
\newcommand{\dg}{\ensuremath{\fes_D}}
\newcommand{\dgzero}{\ensuremath{\accentset{\circ}\fes_D}}
\newcommand{\cg}{\ensuremath{\fes_C}}
\newcommand{\fesW}{\ensuremath{\rW}}
\newcommand{\funq}[1]{\cF\qp{ #1 }}
\newcommand{\dfunq}[1]{\D\funq{#1}}
%\newcommand{\E}{\cE}
\newcommand{\Tr}[1]{\hT\qp{#1}}
\newcommand{\fenics}{\Program{FEniCS}\xspace}
\newcommand{\dolfin}{\Program{DOLFIN}\xspace}
\newcommand{\petsc}{\Program{PETSc}\xspace}
\newcommand{\dune}{\Program{DUNE}\xspace}
\newcommand{\paraview}{\Program{ParaView}\xspace}
\newcommand{\gnuplot}{\Program{Gnuplot}\xspace}
\newcommand{\arxiv}{\Program{arXiv}\xspace}

\newcommand{\nplush}[1]{\ensuremath{#1^{n+\tfrac{1}{2}}}}
\newcommand{\kplush}[1]{\ensuremath{#1^{k+\tfrac{1}{2}}}}


\newcommand{\avg}[1]{\lbrace #1 \rbrace}

\newcommand{\doublelbrace}{
  \mathrel{\ooalign{\cr\kern+1.0pt$\lbrace$\cr\kern-0.5pt$\lbrace$}}}
\newcommand{\doublerbrace}{
  \mathrel{\ooalign{$\rbrace$\cr\kern-1.5pt$\rbrace$\cr\kern-1.0pt}}}

\renewcommand{\avg}[1]{\doublelbrace #1 \doublerbrace}
\newcommand{\tjump}[1]{\jump{#1}_\otimes}

\newcommand{\inflap}{\Delta_\infty}
\newcommand{\plap}{\Delta_p}

\providecommand{\qb}[1]{\ensuremath{\!\left[{#1}\right]}}

\providecommand{\bientry}[3]{\ensuremath{{#1}_{#2}^{#3}}}
\providecommand{\matentry}[3]{\bientry{{#1}}{#2}{#3}}

\providecommand{\squmatmd}[3][1]{
  \begin{bmatrix}
    \matentry{#2}{#1}{#1}&\dotsc&\matentry{#2}{#1}{#3}
    \\
    \vdots & \ddots &\vdots
    \\
    \matentry{#2}{#3}{#1}&\dotsc&\matentry{#2}{#3}{#3}
  \end{bmatrix}
}

\newcommand{\eig}[1]{\sigma\qp{#1}}
\newcommand{\bi}[3]{\ensuremath{\cA\qp{#1,#2;#3}}}
\newcommand{\bib}[3]{\ensuremath{\cB\qp{#1,#2;#3}}}
\newcommand{\bih}[3]{\ensuremath{\cA_h\qp{#1,#2;#3}}}
\newcommand{\bihd}[3]{\ensuremath{\cA_h^D\qp{#1,#2;#3}}}
\newcommand{\bihch}[3]{\ensuremath{\cA_h^{C,H}\qp{#1,#2;#3}}}


\newcommand{\NSK}{Navier--Stokes--Korteweg\xspace}
\newcommand{\EK}{Euler--Korteweg\xspace}

\newcommand{\twopartdef}[4]
{
  \left\{
    \begin{array}{ll}
      #1 & \mbox{if } #2 
      \\
      #3 & \mbox{if } #4
    \end{array}
  \right.
}

\newcommand{\EL}{\qp{\cE \kern-3.0pt \cL}}
\renewcommand{\eenorm}[1]{\Norm{#1}_{2,h}}
\newcommand{\znorm}[1]{\Norm{#1}_{0,h}}
\newcommand{\gnorm}[1]{\Norm{#1}_{0,\E}}
\newcommand{\ggnorm}[1]{\Norm{#1}_{1,\E}}
\newcommand{\J}{\rJ}
